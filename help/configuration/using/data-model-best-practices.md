---
product: campaign
title: 데이터 모델 모범 사례
description: Campaign Classic 데이터 모델로 작업하는 방법 알아보기
audience: configuration
content-type: reference
topic-tags: schema-reference
exl-id: 9c59b89c-3542-4a17-a46f-3a1e58de0748
source-git-commit: 32f55d02920b0104198f809b1be0a91306a4d9e4
workflow-type: tm+mt
source-wordcount: '4007'
ht-degree: 1%

---

# 데이터 모델 모범 사례{#data-model-best-practices}

![](../../assets/v7-only.svg)

이 문서에서는 Adobe Campaign 데이터 모델을 디자인하는 동안 주요 권장 사항에 대해 설명합니다.

Campaign 기본 제공 테이블 및 상호 작용에 대한 자세한 내용은 [이 섹션](../../configuration/using/about-data-model.md) 섹션을 참조하십시오.

Campaign 스키마를 시작하려면 [이 설명서](../../configuration/using/about-schema-reference.md)를 읽어 보십시오. [이 문서](../../configuration/using/about-schema-edition.md)에서 Adobe Campaign 데이터베이스의 개념적 데이터 모델을 확장하기 위해 확장 스키마를 구성하는 방법을 알아보십시오.

## 개요 {#overview}

Adobe Campaign 시스템은 매우 유연하며 초기 구현 이상으로 확장할 수 있습니다. 그러나 가능성은 무한하지만 현명한 결정을 내리고 데이터 모델 디자인을 시작할 강력한 기반을 구축하는 것이 중요합니다.

이 문서에서는 Adobe Campaign 도구를 제대로 설계하는 방법을 배울 수 있는 일반적인 사용 사례와 모범 사례를 제공합니다.

## 데이터 모델 아키텍처 {#data-model-architecture}

Adobe Campaign은 개인화된 고객 경험을 구축하기 위해 온라인 및 오프라인 전략을 연계할 수 있는 강력한 크로스채널 캠페인 관리 시스템입니다.

### 고객 중심 접근 방식 {#customer-centric-approach}

대부분의 이메일 서비스 공급업체는 목록 중심의 접근 방식을 통해 고객에게 커뮤니케이션하고 있지만 Adobe Campaign은 고객과 해당 특성에 대한 광범위한 보기를 활용하기 위해 관계형 데이터베이스를 사용합니다.

이 고객 중심 접근 방식은 아래 차트에 나와 있습니다. 회색 **Recipient** 테이블은 모든 항목이 빌드되는 기본 고객 테이블을 나타냅니다.

![](assets/customer-centric-data-model.png)

각 테이블의 설명에 액세스하려면 **[!UICONTROL Admin > Configuration > Data schemas]** 로 이동하여 목록에서 리소스를 선택한 다음 **[!UICONTROL Documentation]** 탭을 클릭하십시오.

Adobe Campaign 기본 데이터 모델은 [이 문서](../../configuration/using/data-model-description.md)에 제공됩니다.

>[!NOTE]
>
>Adobe Campaign Classic에서 사용자 지정 고객 테이블을 작성할 수 있습니다. 그러나 대부분의 경우 이미 사전 빌드된 추가 테이블 및 기능이 있는 표준 [Recipient 테이블](../../configuration/using/about-data-model.md#default-recipient-table)을 활용하는 것이 좋습니다.

### Adobe Campaign 데이터 {#data-for-campaign}

Adobe Campaign으로 어떤 데이터를 전송해야 합니까? 마케팅 활동에 필요한 데이터를 파악하는 것이 중요합니다.

>[!NOTE]
>
>Adobe Campaign은 데이터 웨어하우스나 보고 도구가 아닙니다. 따라서 가능한 모든 고객 및 관련 정보를 Adobe Campaign으로 가져오거나 보고서를 작성하는 데만 사용할 데이터를 가져오려고 하지 마십시오.

Adobe Campaign에서 속성을 필요로 하는지 여부를 결정하려면 속성이 다음 카테고리 중 하나에 속하는지 자신에게 문의하십시오.

* **세그먼테이션에 사용되는 특성**
* **데이터 관리 프로세스**&#x200B;에 사용되는 속성(예: 집계 계산)
* **개인화에 사용되는 특성**

이러한 속성에 속하지 않는 경우 Adobe Campaign에서 이 속성이 필요하지 않을 수 있습니다.

### 데이터 유형 선택 {#data-types}

시스템의 우수한 아키텍처와 성능을 보장하기 위해 아래 모범 사례에 따라 Adobe Campaign에서 데이터를 설정하십시오.

* 큰 테이블에는 대부분 숫자 필드가 있고 참조 테이블에 대한 링크가 포함되어야 합니다(값 목록 작업 시).
* **expr** 속성을 사용하면 스키마 속성을 테이블의 실제 세트 값이 아닌 계산된 필드로 정의할 수 있습니다. 이렇게 하면 두 값을 모두 저장하지 않고 다른 형식(예: 연령 및 생년월일)의 정보에 액세스할 수 있습니다. 이는 필드가 중복되지 않도록 하는 좋은 방법입니다. 예를 들어 수신자 테이블은 전자 메일 필드에 이미 있는 도메인에 대한 표현식을 사용합니다.
* 그러나 표현식 계산이 복잡하면 **expr** 속성을 즉시 계산으로 사용하는 것이 쿼리의 성능에 영향을 줄 수 있습니다.
* **XML** 유형은 너무 많은 필드를 만들지 않는 좋은 방법입니다. 그러나 데이터베이스의 CLOB 열을 사용하여 디스크 공간을 확보합니다. 또한 복잡한 SQL 쿼리를 생성하고 성능에 영향을 줄 수 있습니다.
* **문자열** 필드의 길이는 항상 열을 사용하여 정의해야 합니다. 기본적으로 Adobe Campaign의 최대 길이는 255이지만, 크기가 더 짧은 길이를 초과하지 않는다는 것을 이미 알고 있는 경우 필드를 더 짧게 유지하는 것이 좋습니다.
* 소스 시스템의 크기가 과대평가되어 도달하지 않을 것으로 확신하는 경우 Adobe Campaign에서 소스 시스템보다 짧은 필드를 포함할 수 있습니다. 이는 Adobe Campaign에서 더 짧은 문자열 또는 더 작은 정수를 의미할 수 있습니다.

### 필드 선택 {#choice-of-fields}

타겟팅 또는 개인화 목적이 있는 경우 필드에 저장해야 합니다. 즉, 필드를 사용하여 개인화된 이메일을 전송하거나 쿼리에서 기준으로 사용하지 않으면 디스크 공간이 필요하지만 불필요한 것입니다.

하이브리드 및 온-프레미스 인스턴스의 경우, FDA(외부 데이터에 액세스할 수 있는 선택적 기능인 Federated Data Access)는 캠페인 프로세스 중에 필드를 &quot;즉시&quot; 추가해야 하는 필요성을 다룹니다. FDA가 있다면 모든 것을 가져올 필요가 없습니다. 자세한 내용은 [페더레이션 데이터 액세스 정보](../../installation/using/about-fda.md)를 참조하십시오.

### 키 선택 {#choice-of-keys}

대부분의 테이블에 기본적으로 정의된 **autok** 외에도 논리적 또는 비즈니스 키(계정 번호, 클라이언트 번호 등)를 추가하는 것이 좋습니다. 나중에 가져오기/조정 또는 데이터 패키지에 사용할 수 있습니다. 자세한 내용은 [식별자](#identifiers)를 참조하십시오.

효율적인 키는 성능에 필수입니다. 숫자 데이터 유형은 항상 테이블의 키로 선호되어야 합니다.

SQLServer 데이터베이스의 경우 성능이 필요한 경우 &quot;클러스터된 인덱스&quot;를 사용하는 것을 고려해 볼 수 있습니다. Adobe이 이 작업을 처리하지 않으므로 SQL에서 만들어야 합니다.

### 전용 테이블스페이스 {#dedicated-tablespaces}

스키마의 테이블스페이스 속성을 사용하면 테이블에 대한 전용 테이블스페이스를 지정할 수 있습니다.

설치 마법사를 사용하여 객체 유형(데이터, 임시 및 인덱스)을 기준으로 저장할 수 있습니다.

전용 테이블스페이스는 분할, 보안 규칙, 유체 및 유연한 관리, 최적화 및 성능을 제공하는 데 더 적합합니다.

## 식별자 {#identifiers}

Adobe Campaign 리소스에는 세 개의 식별자가 있으며 추가 식별자를 추가할 수 있습니다.

다음 표에서는 이 식별자와 그 목적을 설명합니다.

| 식별자 | 설명 | 모범 사례 |
|--- |--- |--- |
| Id | <ul><li>id는 Adobe Campaign 테이블의 실제 기본 키입니다. 기본 테이블의 경우 시퀀스에서 생성된 32비트 번호입니다</li><li>이 식별자는 일반적으로 특정 Adobe Campaign 인스턴스에 대해 고유합니다. </li><li>자동 생성된 ID는 스키마 정의에 표시될 수 있습니다. *autok=&quot;true&quot;* 속성을 검색합니다.</li></ul> | <ul><li>자동 생성된 식별자는 워크플로우 또는 패키지 정의에서 참조로 사용할 수 없습니다.</li><li>ID가 항상 증가하는 숫자가 된다고 가정할 필요는 없습니다.</li><li>기본 제공 테이블의 id는 32비트 숫자이므로 이 유형을 변경할 수 없습니다. 이 번호는 동일한 이름의 섹션에서 다루는 &quot;시퀀스&quot;에서 가져옵니다.</li></ul> |
| 이름(또는 내부 이름) | <ul><li>이 정보는 테이블의 레코드의 고유 식별자입니다. 이 값은 일반적으로 생성된 이름으로 수동으로 업데이트할 수 있습니다.</li><li>이 식별자는 Adobe Campaign의 다른 인스턴스에 배포할 때 값을 유지하며 비워 둘 수 없습니다.</li></ul> | <ul><li>객체가 환경에서 다른 환경으로 배포하려는 경우 Adobe Campaign에서 생성한 레코드 이름의 이름을 변경합니다.</li><li>개체에 네임스페이스 속성(*스키마* 예)이 있으면 이 공통 네임스페이스는 생성된 모든 사용자 지정 개체에 활용됩니다. 일부 예약된 네임스페이스는 사용하지 않아야 합니다. *nms*, *xtk*, *nl*, *ncl*, *crm*, *xxl*</li><li>개체에 네임스페이스(*workflow* 또는 *배달*)가 없는 경우, 이 네임스페이스 개념은 내부 이름 개체의 접두사로 추가됩니다. *namespaceMyObjectName*.</li><li>공백 &quot;&quot;, 세미열 &quot;:&quot; 또는 하이픈 &quot;-&quot;과 같은 특수 문자는 사용하지 마십시오. 이러한 모든 문자는 밑줄 &quot;_&quot;(허용되는 문자)로 바뀝니다. 예를 들어 &quot;abc-def&quot; 및 &quot;abc:def&quot;는 &quot;abc_def&quot;로 저장되고 서로 덮어씁니다.</li></ul> |
| 레이블 | <ul><li>레이블은 Adobe Campaign에 있는 개체 또는 레코드의 비즈니스 식별자입니다.</li><li>이 개체에는 공백 및 특수 문자가 허용됩니다.</li><li>그것은 레코드의 고유성을 보장하지 않습니다.</li></ul> | <ul><li>개체 레이블의 구조를 결정하는 것이 좋습니다.</li><li>Adobe Campaign 사용자의 레코드 또는 개체를 식별하는 데 가장 사용자 친화적인 솔루션입니다.</li></ul> |

## 사용자 지정 내부 키 {#custom-internal-keys}

기본 키는 Adobe Campaign에서 만든 모든 테이블에 필요합니다.

대부분의 조직은 외부 시스템에서 레코드를 가져옵니다. 수신자 테이블의 실제 키는 &quot;id&quot; 속성이지만 사용자 지정 키도 결정할 수 있습니다.

이 사용자 지정 키는 Adobe Campaign을 제공하는 외부 시스템의 실제 레코드 기본 키입니다.

기본 제공 테이블에 자동 및 내부 키가 모두 있으면 내부 키가 실제 데이터베이스 테이블에서 고유한 인덱스로 설정됩니다.

사용자 지정 테이블을 생성할 때 두 가지 옵션이 있습니다.
* 자동 생성된 키(id)와 내부 키(사용자 지정)의 조합입니다. 시스템 키가 정수가 아니거나 복합 키인 경우 이 옵션이 흥미롭습니다. 정수는 큰 테이블에서 더 높은 성능을 제공하고 다른 테이블과 결합합니다.
* 기본 키를 외부 시스템 기본 키로 사용. 일반적으로 이 솔루션은 서로 다른 시스템 간에 일관된 키를 사용하여 데이터를 가져오고 내보내는 방법을 간소화하므로 선호됩니다. 키 이름이 &quot;id&quot;이고 외부 값으로 채워져야 하는 경우(자동 생성된 것이 아님) 자동 채우기를 비활성화해야 합니다.

>[!IMPORTANT]
>
>자동 채우기를 워크플로우에서 참조로 사용해서는 안 됩니다.

## 시퀀스 {#sequences}

Adobe Campaign 기본 키는 모든 기본 테이블에 대해 자동 생성된 id이며 사용자 지정 테이블에 대해 같을 수 있습니다. 자세한 내용은 [이 섹션](#identifiers)을 참조하십시오.

이 값은 **시퀀스**&#x200B;라고 하는 것, 즉 숫자 시퀀스를 생성하는 데 사용되는 데이터베이스 객체에서 가져옵니다.

두 가지 유형의 시퀀스가 있습니다.
* **공유**: 두 개 이상의 테이블이 동일한 시퀀스에서 해당 id를 선택합니다. 즉, 한 테이블에서 id &#39;X&#39;를 사용하는 경우 동일한 시퀀스를 공유하는 다른 테이블에는 해당 id가 &#39;X&#39;인 레코드가 없습니다. **** XtkNewIdis는 Adobe Campaign에서 사용할 수 있는 기본 공유 시퀀스입니다.
* **전용**: 한 테이블만 시퀀스에서 해당 id를 선택합니다. 일반적으로 시퀀스 이름에는 테이블 이름이 포함됩니다.

>[!IMPORTANT]
>
>시퀀스는 32비트 정수 값으로 사용할 수 있는 유한 최대 값 수입니다. 21억 4천 최대 값에 도달한 후 ID를 재활용하기 위해 시퀀스가 0으로 돌아갑니다.
>
>이전 데이터를 제거하지 않은 경우 그 결과는 고유한 키 위반이 되어 플랫폼 상태 및 사용에 대한 차단기가 됩니다. Adobe Campaign은 통신(게재 로그 표에 영향을 줄 때)을 전송할 수 없으며 성능에 큰 영향을 줍니다.

따라서 로그에 대해 180일 유지 기간이 있는 연간 60억 개의 이메일을 전송하는 고객은 4개월 후에 ID가 없게 됩니다. 이러한 문제를 방지하려면 볼륨에 따라 제거 설정이 있는지 확인하십시오. 자세한 내용은 [이 섹션](#data-retention)을 참조하십시오.

기본 키가 autoPK인 Adobe Campaign에서 사용자 지정 테이블을 만드는 경우 사용자 지정 전용 시퀀스를 해당 테이블과 체계적으로 연결해야 합니다.

기본적으로 사용자 지정 시퀀스에는 +1,000부터 +2.1BB 범위의 값이 있습니다. 기술적으로, 음수 ID를 활성화하여 4BB의 전체 범위를 얻을 수 있습니다. 이 ID는 주의해서 사용해야 하며, 음수에서 양수로 교차하면 하나의 ID가 손실됩니다. 일반적으로 생성된 SQL 쿼리에서 레코드 0은 Adobe Campaign에서 무시됩니다.

**관련 항목:**
* **시퀀스 자동 생성** 기능에 대한 자세한 내용은 [이 문서](https://helpx.adobe.com/kr/campaign/kb/sequence_auto_generation.html)를 참조하십시오.
* 시퀀스가 고갈되면 이 비디오](https://helpx.adobe.com/customer-care-office-hours/campaign/sequences-exhaustion-campaign-classic.html)에서 [을 시청하십시오.

## 인덱스 {#indexes}

인덱스는 성능에 필수적입니다. 스키마에서 키를 선언하면 Adobe이 키의 필드에 인덱스를 자동으로 만듭니다. 키를 사용하지 않는 쿼리에 대해 더 많은 인덱스를 선언할 수도 있습니다.

Adobe은 성능을 향상시킬 수 있으므로 추가 인덱스를 정의하는 것을 권장합니다.

그러나 다음 사항에 유의하십시오.

* 인덱스 사용이 액세스 패턴에 바인딩됩니다. 인덱싱 최적화는 데이터베이스 설계의 주요 부분으로 자주 활용되며 전문가가 처리해야 합니다. 인덱스를 추가하는 것은 데이터베이스 유지 관리에 첨부된 반복적인 워크플로우입니다. 성능 문제를 해결할 수 있도록 여러 단계로 수행됩니다.
* 인덱스는 인덱스 자체를 저장하기 위해 전체 테이블 크기를 증가시킵니다.
* 열에 인덱스를 추가하면 SELECT(데이터 읽기 액세스)의 성능이 향상되지만 UPDATE(데이터 쓰기 액세스)의 성능이 저하될 수 있습니다.
* 이는 데이터 삽입 중에 성능에 영향을 주므로 인덱스의 크기와 개수를 제한해야 합니다.
* 필요하지 않은 경우 인덱스를 추가하지 마십시오. 필수 사항인지 그리고 쿼리의 전체 성능(테스트 및 학습)을 증가하는지 확인합니다.
* 일반적으로 쿼리가 10% 이상의 레코드를 가져오지 않는다는 것을 알고 있으면 인덱스가 효율적입니다.
* 정의해야 하는 인덱스를 신중하게 선택합니다.
* 기본 인덱스를 기본 테이블에서 제거하지 마십시오.

<!--When you are performing an initial import with very high volumes of data insert in Adobe Campaign database, it is recommended to run that import without custom indexes at first. It will allow to accelerate the insertion process. Once you’ve completed this important import, it is possible to enable the index(es).-->

### 예제

인덱스 관리는 매우 복잡해질 수 있으므로 인덱스 작동 방식을 이해하는 것이 중요합니다. 이러한 복잡성을 설명하기 위해 이름과 성을 필터링하여 수신자를 검색하는 등의 기본 예를 살펴보겠습니다. 방법은 다음과 같습니다.
1. 데이터베이스의 모든 수신자를 나열하는 폴더로 이동합니다. 자세한 내용은 [프로필 관리](../../platform/using/managing-profiles.md)를 참조하십시오.
1. **[!UICONTROL First name]** 필드를 마우스 오른쪽 단추로 클릭합니다.
1. **[!UICONTROL Filter on this field]**&#x200B;을(를) 선택합니다.

   ![](assets/data-model-index-example.png)

1. **[!UICONTROL Last name]** 필드에 대해 이 작업을 반복합니다.

화면 상단에 해당 필터 2개가 추가됩니다.

![](assets/data-model-index-search.png)

이제 다양한 필터 조건에 따라 **[!UICONTROL First name]** 및 **[!UICONTROL Last name]** 필드에서 검색 필터링을 수행할 수 있습니다.

이제 이러한 필터에 대한 검색 속도를 높이기 위해 인덱스를 추가할 수 있습니다. 하지만 어떤 인덱스를 사용해야 합니까?

>[!NOTE]
>
>이 예는 PostgreSQL 데이터베이스를 사용하는 호스팅 고객에게 적용됩니다.

다음 표는 아래 설명된 세 개의 인덱스가 첫 번째 열에 표시된 액세스 패턴에 따라 사용되거나 사용되지 않는 경우를 보여 줍니다.

| 검색 기준 | 인덱스 1(이름 + 성) | 인덱스 2(이름만) | 인덱스 3(성만) | 댓글 |
|--- |--- |--- |--- |--- |
| 이름은 &quot;Johnny&quot;입니다 | 사용됨 | 사용됨 | 사용되지 않음 | 이름이 색인 1의 첫 번째 위치에 있으므로 어쨌든 사용됩니다. 성에 기준을 추가할 필요가 없습니다. |
| 이름은 &quot;Johnny&quot;이고 성은 &quot;Smith&quot;입니다. | 사용됨 | 사용되지 않음 | 사용되지 않음 | 두 속성이 동일한 쿼리에서 검색되므로 두 속성을 모두 결합하는 색인만 사용됩니다. |
| 성이 &quot;Smith&quot;입니다. | 사용되지 않음 | 사용되지 않음 | 사용됨 | 색인의 속성 순서가 고려됩니다. 이 순서와 일치하지 않으면 색인이 사용되지 않을 수 있습니다. |
| 이름은 &quot;Joh&quot;로 시작합니다 | 사용됨 | 사용됨 | 사용되지 않음 | &quot;왼쪽 검색&quot;을 사용하면 색인이 활성화됩니다. |
| 이름은 &quot;nny&quot;로 끝납니다 | 사용되지 않음 | 사용되지 않음 | 사용되지 않음 | &quot;오른쪽 검색&quot;을 수행하면 색인이 비활성화되고 전체 검사가 수행됩니다. 일부 특정 인덱스 유형은 이 사용 사례를 처리할 수 있지만, Adobe Campaign에서는 기본적으로 사용할 수 없습니다. |
| 이름에 &quot;John&quot;이 포함됨 | 사용되지 않음 | 사용되지 않음 | 사용되지 않음 | &quot;left&quot;와 &quot;right&quot; 검색의 조합입니다. 후기 때문에 색인이 비활성화되고 전체 검사가 수행됩니다. |
| 이름은 &quot;john&quot;입니다. | 사용되지 않음 | 사용되지 않음 | 사용되지 않음 | 인덱스는 대/소문자를 구분합니다. 대/소문자를 구분하지 않게 하려면 &quot;upper(firstname)&quot;와 같은 SQL 함수를 포함하는 특정 인덱스를 만들어야 합니다. &quot;unaccent(firstname)&quot;와 같은 다른 데이터 변환에서도 동일한 작업을 수행해야 합니다. |

## 링크 및 카디널리티 {#links-and-cardinality}

### 링크 {#links}

큰 테이블에 있는 &quot;자체&quot; 무결성을 주의하십시오. &quot;자체&quot; 무결성에 큰 테이블이 있는 레코드를 삭제하면 인스턴스가 중지될 수 있습니다. 테이블이 잠겼고, 한 테이블씩 삭제한다. 따라서 용량이 큰 하위 테이블에서 &quot;중립&quot; 무결성을 사용하는 것이 가장 좋습니다.

링크를 외부 조인으로 선언하는 것은 성능에 좋지 않습니다. 0ID 레코드는 외부 조인 기능을 에뮬레이션합니다. 링크가 자동 연결을 사용하는 경우 외부 조인을 선언할 필요는 없습니다.

워크플로우에서 테이블을 조인할 수 있지만 Adobe은 데이터 구조 정의에서 직접 리소스 간의 공통 링크를 정의하는 것을 권장합니다.

링크는 표의 실제 데이터와 일치하도록 정의해야 합니다. 잘못된 정의는 링크를 통해 검색된 데이터에 영향을 줄 수 있습니다(예: 예기치 않게 레코드를 복제하는 경우).

링크의 이름을 테이블 이름으로 일관되게 지정합니다. 링크 이름은 떨어진 테이블이 무엇인지 이해하는 데 도움이 됩니다.

&quot;id&quot;가 있는 링크의 이름을 접미사로 지정하지 마십시오. 예를 들어 이름을 &quot;transactionId&quot;가 아닌 &quot;transaction&quot;로 지정합니다.

기본적으로 Adobe Campaign에서는 외부 테이블의 기본 키를 사용하여 링크를 만듭니다. 보다 명확하게 하기 위해 링크 정의에서 연결을 명시적으로 정의하는 것이 좋습니다.

링크에 사용되는 속성에 인덱스가 추가됩니다.

다음   만든 사람 및 마지막 수정한 사람 링크가 많은 표에 있습니다. 회사에서 이 정보를 사용하지 않는 경우 링크에서 noDbIndex 속성을 사용하여 인덱스를 비활성화할 수 있습니다.

### 카디널리티 {#cardinality}

링크를 디자인할 때 1-1 관계를 선언할 때 대상 레코드가 고유한지 확인합니다. 그렇지 않으면 한 레코드만 예상되면 조인이 여러 레코드를 반환할 수 있습니다. 이렇게 하면 &quot;쿼리에서 예상보다 많은 행을 반환&quot;할 때 게재를 준비하는 동안 오류가 발생합니다. 링크 이름을 대상 스키마와 동일한 이름으로 설정합니다.

(1) 쪽의 스키마에 카디널리티(1-N)가 있는 링크를 정의합니다. 예를 들어, 관계 수신자 (1) - (N) 트랜잭션은 트랜잭션 스키마에 정의되어 있어야 합니다.

링크의 역방향 카디널리티는 기본적으로 (N)입니다. 링크 정의에 revCardinality=&#39;single&#39; 속성을 추가하여 링크(1-1)를 정의할 수 있습니다.

사용자가 역방향 링크를 볼 수 없으면 링크 정의 revLink=&#39;_NONE_&#39;으로 숨길 수 있습니다. 예를 들어 완료된 마지막 트랜잭션과 수신자의 링크를 정의하는 것이 좋습니다. 수신자로부터 마지막 트랜잭션으로의 링크만 볼 수 있고, 트랜잭션 테이블에서 역방향 링크는 볼 필요가 없습니다.

외부 조인(1-0.1)을 수행하는 링크는 시스템 성능에 영향을 주므로 주의해서 사용해야 합니다.

## 데이터 유지 - 정리 및 제거 {#data-retention}

Adobe Campaign은 데이터 웨어하우스나 보고 도구가 아닙니다. 따라서 Adobe Campaign 솔루션의 성능을 향상시키기 위해 데이터베이스 증가가 계속 제어되어야 합니다. 이를 위해 아래 모범 사례 중 일부를 따르는 것이 도움이 될 수 있습니다.

기본적으로 Adobe Campaign 게재 및 추적 로그에는 180일의 유지 기간이 있습니다. 정리 프로세스가 실행되어 이보다 오래된 로그를 제거합니다.

* 로그를 더 오래 유지하려면 전송된 메시지 크기와 데이터베이스 크기에 따라 신중하게 결정해야 합니다. 미리 알림으로 Adobe Campaign 시퀀스는 32비트 정수입니다.
* 사용 가능한 모든 ID를 사용할 수 있는 위험을 제한하기 위해 이러한 표에 한 번에 10억 개 이상의 레코드(사용 가능한 21억 4천만 ID의 약 50%)가 없는 것이 좋습니다. 따라서 일부 고객은 보존 기간을 180일 미만으로 줄일 수 있습니다.

[Campaign 개인 정보 및 보안 지침](../../platform/using/privacy-and-recommendations.md)에 있는 데이터 유지에 대해 자세히 알아보십시오.

이 섹션](../../production/using/database-cleanup-workflow.md)에서 Campaign 데이터 기반 정리 워크플로우 [에 대해 자세히 알아보십시오.

>[!IMPORTANT]
>
>사용자 지정 테이블은 표준 정리 프로세스로 삭제되지 않습니다. 첫 번째 날에는 이러한 작업이 필요하지 않지만, 사용자 지정 테이블에 대한 제거 프로세스를 만드는 것을 잊지 마십시오. 이 경우 성능 문제가 발생할 수 있습니다.

Adobe Campaign에는 다음과 같은 몇 가지 해결 방법이 있어 레코드 필요성을 최소화할 수 있습니다.
* Adobe Campaign 외부의 데이터 웨어하우스에서 데이터를 내보냅니다.
* 마케팅 관행에 충분하면서 더 적은 공간을 사용하는 집계된 값을 생성합니다. 예를 들어 마지막 구매를 추적하기 위해 Adobe Campaign에 전체 고객 거래 기록이 필요하지 않습니다.

스키마에서 &quot;deleteStatus&quot; 속성을 선언할 수 있습니다. 레코드를 삭제로 표시한 다음 정리 작업에서 삭제를 연기하는 것이 더 효율적입니다.

## 성능 {#performance}

언제든지 더 나은 성능을 보장하려면 아래 모범 사례를 따르십시오.

### 일반 권장 사항 {#general-recommendations}

* 쿼리에 &quot;CONTAINS&quot;와 같은 작업을 사용하지 마십시오. 의 예상 내용을 알고 있고 을 필터링하려는 경우 &quot;EQUAL TO&quot; 또는 기타 특정 필터 연산자와 동일한 조건을 적용합니다.
* 워크플로우에서 데이터를 작성하는 동안 인덱싱되지 않은 필드와 결합하지 마십시오.
* 가져오기 및 내보내기와 같은 프로세스가 업무 시간에 발생하는지 확인하십시오.
* 모든 일별 활동에 대한 일정이 있는지 확인하고 일정대로 하세요.
* 일별 프로세스 중 하나 또는 일부가 실패하여 같은 날에 실행해야 하는 경우 시스템 성능에 영향을 줄 수 있으므로 수동 프로세스를 시작할 때 실행 중인 충돌하는 프로세스가 없는지 확인합니다.
* 가져오기 프로세스 또는 수동 프로세스가 실행되는 동안 일별 캠페인이 실행되지 않도록 하십시오.
* 모든 행에 필드를 복제하지 않고 하나 또는 여러 개의 참조 테이블을 사용합니다. 키/값 쌍을 사용할 때는 숫자 키를 선택하는 것이 좋습니다.
* 짧은 문자열을 사용할 수 있습니다. 외부 시스템에서 참조 테이블이 이미 있는 경우 이를 다시 사용하면 Adobe Campaign과의 데이터 통합이 용이해집니다.

### 일대다 관계 {#one-to-many-relationships}

* 데이터 디자인은 유용성과 기능에 영향을 줍니다. 일대다 관계가 많은 데이터 모델을 디자인하는 경우 사용자가 애플리케이션에서 의미 있는 논리를 구성하는 것이 더 어렵습니다. 일대다 필터 로직은 기술 전문가가 아닌 마케터가 올바르게 작성하고 이해하는 데 어려울 수 있습니다.
* 사용자가 쿼리를 쉽게 작성할 수 있으므로 한 테이블에 모든 필수 필드를 포함하는 것이 좋습니다. 조인을 방지할 수 있는 경우 테이블 간에 일부 필드를 복제하는 것이 좋은 경우가 있습니다.
* 특정 기본 제공 기능에서는 일대다 관계(예: 오퍼 가중치 공식 및 게재)를 참조할 수 없습니다.

## 큰 테이블 {#large-tables}

Adobe Campaign은 타사 데이터베이스 엔진을 사용합니다. 공급자에 따라 더 큰 테이블을 위해 성능을 최적화하려면 특정 디자인이 필요할 수 있습니다.

다음은 큰 테이블과 복잡한 조인을 사용하여 데이터 모델을 디자인할 때 수행해야 하는 몇 가지 일반적인 모범 사례입니다.

* 추가 사용자 지정 수신자 테이블을 사용할 때는 각 게재 매핑에 대한 전용 로그 테이블이 있는지 확인합니다.
* 특히 사용하지 않는 열을 식별하여 열 수를 줄입니다.
* 여러 조건 및/또는 여러 열에 대한 조인과 같은 복잡한 조인을 방지하여 데이터 모델 관계를 최적화합니다.
* 조인 키의 경우 항상 문자 문자열보다는 숫자 데이터를 사용하십시오.
* 로그 보존 깊이를 최대한 줄입니다. 더 깊은 기록이 필요한 경우 계산 및/또는 사용자 지정 로그 테이블을 처리하여 더 큰 내역을 저장할 수 있습니다.

### 표 크기 {#size-of-tables}

테이블 크기는 레코드 수와 레코드당 열 수의 조합입니다. 둘 다 쿼리 성능에 영향을 줄 수 있습니다.

* **작은 크기** 테이블은 배달 테이블과 유사합니다.
* **중간 크기** 테이블은 받는 사람 테이블의 크기와 동일합니다. 고객당 한 번의 기록을 가지고 있습니다.
* **큰 크기** 테이블은 Broad 로그 테이블과 유사합니다. 고객당 많은 레코드가 있습니다.
예를 들어 데이터베이스에 1,000만 명의 수신자가 포함되어 있는 경우 Broad 로그 테이블에는 약 100개~2억 개의 메시지가 포함되며 Delivery 테이블에는 수천 개의 레코드가 포함됩니다.

PostgreSQL에서 행은 [TOAST](https://wiki.postgresql.org/wiki/TOAST) 메커니즘을 방지하기 위해 8KB를 초과할 수 없습니다. 따라서 시스템(메모리 및 CPU)의 최적 성능을 유지하려면 열 수 및 각 행의 크기를 최대한 줄이십시오.

행 수는 성능에도 영향을 줍니다. Adobe Campaign 데이터베이스는 타깃팅 또는 개인화 목적으로 활발히 사용되지 않는 이전 데이터를 저장하도록 설계되지 않았습니다. 이것은 운영 데이터베이스입니다.

많은 수의 행과 관련된 성능 문제를 방지하려면 데이터베이스에 필요한 레코드만 유지합니다. 다른 모든 레코드는 타사 데이터 웨어하우스로 내보내고 Adobe Campaign 운영 데이터베이스에서 제거해야 합니다.

다음은 표 크기와 관련된 몇 가지 우수 사례입니다.

* 필드 수가 적고 숫자 데이터가 많은 큰 테이블을 디자인합니다.
* 많은 수의 열 유형을 사용하지 마십시오(예: Int64)를 사용하여 부울 값과 같은 작은 숫자를 저장합니다.
* 테이블 정의에서 사용되지 않은 열을 제거합니다.
* Adobe Campaign 데이터베이스에 내역 또는 비활성 데이터를 유지하지 마십시오(내보내기 및 정리).

다음은 한 예입니다.

![](assets/transaction-table-example.png)

이 예제에서는
* *Transaction* 및 *Transaction Item* 표가 큽니다. 1천만 명 이상.
* *Product* 및 *Store* 표가 더 작습니다. 10,000 미만.
* 제품 레이블 및 참조가 *Product* 표에 배치되었습니다.
* *Transaction Item* 테이블에는 *Product* 테이블에 대한 링크만 있으며, 이는 숫자입니다.

<!--For more detailed best practices on how to optimize the database design for larger volumes, see [Campaign Classic Data model Best practices](https://helpx.adobe.com/campaign/kb/acc-data-model-best-practices.html).-->
